<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MixFun</title>
    <link rel="icon" href="img/logo.png" type="image/x-icon">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta property="og:url" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Please help me to win the iPhone!ðŸ“±Just click the link belowðŸ˜" />
    <meta property="og:description" content="Please help me to win the iPhone!ðŸ“±Just click the link belowðŸ˜" />
    <meta property="og:image" content="images/share-logo.png" />
    <link rel="icon" href="img/logo.png" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="css/bootstrap-grid.css"/>
    <link rel="stylesheet" type="text/css" href="css/bootstrap-reboot.css"/>
    <link rel="stylesheet" type="text/css" href="css/slide-unlock.css"/>
</head>

<script src="https://code.jquery.com/jquery-3.4.0.js"></script>
<script src="js/bootstrap.js"></script>
<script src="js/bootstrap.bundle.js"></script>
<script src="js/clipboard.min.js"></script>
<script src="http://cdn.bootcss.com/blueimp-md5/1.1.0/js/md5.min.js"></script>
<script src="js/jquery.slideunlock.js" type="text/javascript"></script>
<script src="js/platform.js" type="text/javascript"></script>
<style>
    .top{
        background-image: url("img/bg_new.png");
        background-repeat: no-repeat;
        background-size: 100%;
    }
    .tooltip-inner{
        background-color: #b3d7ff;
        color: #6974FF;
        max-width: 300px;
    }
    .bs-tooltip-top .arrow::before, .bs-tooltip-auto[x-placement^="top"] .arrow::before{
        border-top-color: #b3d7ff;
    }
    .tooltip{
        align-content: center;
        z-index: -1;
    }
    input{
        margin-top: 15px;
    }
    textarea{
        margin-top: 15px;
    }
    li:hover{
        background-color: white;
    }
    .nav-link.active {
        color: #007bff;
    }
    .shade {
        margin-top: 30px;
    }
</style>
<body onload="showSurprise()">
<div class="container" style="padding:0;background-color: #f7f7fb;" align="center">
    <div align="center">
        <img id="tx" style="width: 50px;height: 50px;border-radius: 25px;position: inherit;z-index: 9999;margin-top: 25px;">
        <p id="mc" style="margin-top: 10px"></p>
    </div>

    <div id="coinDiv" class="card" style="display: none; width: 95%;border-radius: 10px;box-shadow: 2px 2px 2px #EEEEEE; margin-bottom: 20px">
        <div class="card-body" style="padding: 10px;">
            <a id="coinLink" style="text-decoration: none"><p id="totalCoins" style="color: #767EF0; font-family: PingFangSC-Regular, sans-serif; font-size: 30px; font-weight: bold; margin-bottom: 0px"></p></a>
            <p style="color: #9B9B9B; font-family: PingFangSC-Regular, sans-serif; font-size: 12px; margin-bottom: 15px">Mixcoin Reward</p>
            <table width="100%" style="margin-bottom: 0px">
                <tr>
                    <td width="33%" align="center">
                        <p id="watchCoins" style="color: #353535; font-size: medium; margin-bottom: 0px">
                        <p style="color: #9B9B9B; font-family: PingFangSC-Regular, sans-serif; font-size: 12px; margin-bottom: -10px">Watch Reward</p>
                        </p>
                    </td>
                    <td width="33%" align="center">
                        <p id="uploadCoins" style="color: #353535; font-size: medium; margin-bottom: 0px">
                        <p style="color: #9B9B9B; font-family: PingFangSC-Regular, sans-serif; font-size: 12px; margin-bottom: -10px">Upload Reward</p>
                        </p>
                    </td>
                    <td width="33%" align="center">
                        <p id="inviteCoins" style="color: #353535; font-size: medium; margin-bottom: 0px">
                        <p style="color: #9B9B9B; font-family: PingFangSC-Regular, sans-serif; font-size: 12px; margin-bottom: -10px">Referral Reward</p>
                        </p>
                    </td>
                </tr>
            </table>
        </div>
    </div>

    <div class="card" style="width: 95%;border-radius: 10px;box-shadow: 2px 2px 2px #EEEEEE;">
        <div class="card-body" style="padding: 10px;">
            <p style="color: #9B9B9B;font-size: medium">You've invited <span id="num" style="color: #6974FF"></span> friends</p>
            <div id="ref"></div>
            <p class="card-text">Your referral codeï¼š
                <input id="shareId" style="border: 0px;width: 100px;" readonly/>
                <button class="btn shareId" id="copy" data-clipboard-target="#shareId" data-clipboard-action="copy" style="background: linear-gradient(to right, #F45D82, #6C81F8);border-radius: 20px;border: 0px;color: white;" onclick="copy('shareId')" >&nbsp;Copy&nbsp;</button>
            </p>
            <div style="margin-top: 20px; margin-bottom: 10px;">
                <p>Share your referral code or click the link below to invite your friends!</p>
                <row>
                    <a class="col-4 fc" style="padding: 10%"  href="" target="_blank">
                        <img  id="tips" src="img/icon_facebook.png" data-toggle="popover" data-placement="top" data-content="Share the referral link to your friend and both of you will win 50 coins.">
                    </a>
                    <a class="col-4 lj" style="padding: 10%" target="_blank" onclick="copy('lj')">
                        <input id="lj" type="hidden">
                        <img src="img/icon_ic_link.png">
                    </a>
                </row>
            </div>
        </div>
    </div>

    <div class="shade" align="center">
        <p>If you have a referral code, enter here to get 50 Mixcoin reward.</p>
        <input class="form-control" id="shareCode" style="width: 70%;border-radius: 15px;" placeholder="Enter your friend's referral code">
        <button class="btn btn-light" style="margin-top: 10px; background: linear-gradient(to right, #F45D82, #6C81F8);border-radius: 20px;border: 0px;color: white;" onclick="setShareCode()">Submit</button>
    </div>
    <div id="activityList" style="display: none">
        <div style="margin-top: 20px;border-width: thin;border-color: #9B9B9B;">
            <ul class="nav nav-tabs nav-justified">
                <li class="nav-item" style="font-size: 13px">
                    <a class="nav-link active" href="#gcash" data-toggle="tab" id="tabIn">GCash</a>
                </li>
                <li class="nav-item" style="font-size: 13px">
                    <a class="nav-link" href="#draw" data-toggle="tab">Mobile Legends</a>
                </li>
                <li class="nav-item" style="font-size: 13px">
                    <a class="nav-link" href="#buy" data-toggle="tab">Mobile Loads</a>
                </li>
                <li class="nav-item" style="font-size: 13px">
                    <a class="nav-link" href="#rulesofsurvival" data-toggle="tab">Rules of Survival</a>
                </li>
            </ul>
            <div id="myTabContent" class="tab-content">
                <div class="tab-pane fade in active show commodity" id="gcash">
                </div>
                <div class="tab-pane fade" id="draw">
                </div>
                <div class="tab-pane fade" id="buy">
                </div>
                <div class="tab-pane fade" id="rulesofsurvival">
                </div>
            </div>
        </div>
    </div>
</div>

<div align="center" style="margin-top: 4%">
    <a id="androidAtomeURL" target="_blank">
        <img src="img/banner_Atome.png" style="width: 98%">
    </a>
</div>

<div id="footer" style="width: 100%;margin-top: 20px;" align="center">
    <p>Contact us on <a href="https://www.facebook.com/groups/419649578852831/"> Facebook</a></p>
    <p style="color: #BC9982;">Â© 2019 MIXFUN LIMITED</p>
</div>

<!-- alert -->
<div class="modal fade" id="ModalAlert" tabindex="-1" role="dialog" aria-labelledby="ModalNoticeTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document" style="border-radius: 20px;">
        <div class="modal-content" style="border-radius: 20px;">
            <div class="modal-header" style="background: linear-gradient(to right, #b4d0ef, #e4f1f8);border-radius: 20px 20px 0 0;">
                <h5 class="modal-title" id="ModalNoticeTitle">Message</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="alert"></div>
        </div>
    </div>
</div>

<!-- alert -->
<div class="modal fade" id="ModalConf" tabindex="-1" role="dialog" aria-labelledby="ModalNoticeTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document" style="border-radius: 20px;">
        <div class="modal-content" style="border-radius: 20px;">
            <div class="modal-header" style="background: linear-gradient(to right, #b4d0ef, #e4f1f8);border-radius: 20px 20px 0 0;">
                <h5 class="modal-title" id="ModalNoticeTitle">Warning</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p id="type1"><span class="hf"></span> coins will be deducted. No Refund. Confirm to draw?</p>
                <p id="type2"><span class="hf"></span> coins will be deducted. Confirm to redeem?</p>
                <button class="btn btn-info" onclick="cjl()" style="margin-top: 20px">Continue</button>
                <button class="btn" data-dismiss="modal" aria-label="Close" style="margin-top: 20px">Cancel</button>
                <input id="it" type="hidden"/>
                <input id="itname" type="hidden"/>
                <input id="ittype" type="hidden"/>
            </div>
        </div>
    </div>
</div>

<!-- Exchange -->
<div class="modal fade" id="ModalExchange" tabindex="-1" role="dialog" aria-labelledby="Box" aria-hidden="true" style="margin-top: 8%;border-radius: 20px;">
    <div class="modal-dialog" role="document" style="border-radius: 20px;height: 100%">
        <div class="modal-content" style="border-radius: 20px;">
            <div class="modal-header" style="background: linear-gradient(to right, #b4d0ef, #e4f1f8);border-radius: 20px 20px 0 0;">
                <h5 class="modal-title">Redeem
                </h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="padding-bottom: 5px;">
                    <span>We will send out the prizes as soon as possible in 3 DAYS. Thanks for your patience.
                    </span>
            </div>
            <span id="bt" style="color: red;margin-left: 10%;"></span>
            <div class="modal-body" align="center">
                <input type="hidden" id="id"/>
                <input type="hidden" id="commodity_id"/>
                <input class="form-control" type="text" id="recipient" placeholder="Enter your name" style="border-radius: 15px;background-color: #F1F1F1;border: 0px;"/>
                <input placeholder="Telecom Company(Smart or Globe)" class="form-control" id="phoneType" style="border-radius: 15px;background-color: #F1F1F1;border: 0px;margin-top: 10px;">
                <input class="form-control" type="text" id="phone" placeholder="Enter your phone number" maxlength="11" style="border-radius: 15px;background-color: #F1F1F1;border: 0px;"/>
                <input class="form-control" type="text" id="moblieLegend" placeholder="Mobile Legends ID:12345678" maxlength="9" style="border-radius: 15px;background-color: #F1F1F1;border: 0px; width: 78%; display: inline-block;"/>
                <input class="form-control" type="text" id="moblieLegendExtra" placeholder="1234" maxlength="4" style="border-radius: 15px;background-color: #F1F1F1;border: 0px; width: 20%; display: inline-block;"/>
                <input class="form-control" type="text" id="rosInput" placeholder="Rules of Survival ID: 123456789" maxlength="9" style="border-radius: 15px;background-color: #F1F1F1;border: 0px;"/>
                <input class="form-control" type="text" id="gcashAccount" placeholder="Enter your GCash account" maxlength="11" style="border-radius: 15px;background-color: #F1F1F1;border: 0px;"/>
                <textarea class="form-control" id="address" placeholder="Enter your address" style="border-radius: 15px;background-color: #F1F1F1;border: 0px;"></textarea>
                <p style="margin-top: 10px;">Should you have any questions, please inbox us on MixFun Facebook</p>
                <button onclick="buy()" class="btn" style="background: linear-gradient(to right, #F45D82, #6C81F8);border-radius: 20px;border: 0px;color: white;">Submit</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ModalMiniworld" tabindex="-1" role="dialog" aria-labelledby="ModalNoticeTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document" style="border-radius: 20px;">
        <div class="modal-content" style="border-radius: 20px;">
            <div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="height: 40px; width: 60px">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" align="center" style="padding-top: 0">
                <p style="text-align: left">Here is your code, please copy and activate it in your Mini World account.</p>
                <p id="miniworldID" style="text-align: center; font-size: 18px; font-weight: 500"></p>
                <button class="btn" id="miniworldIDBtn" data-clipboard-action="copy" data-clipboard-target="#miniworldID" style="background: linear-gradient(to right, #F45D82, #6C81F8);border-radius: 20px;border: 0px;color: white;" onclick="copy2()">&nbsp;Copy&nbsp;</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ModalDownloadGCash" tabindex="-1" role="dialog" aria-labelledby="ModalNoticeTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document" style="border-radius: 20px;">
        <div class="modal-content" style="border-radius: 20px;">
            <div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="height: 40px; width: 60px">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" align="center" style="padding-top: 0">
                <dl style="text-align: left">
                    <dd style="margin-top: 10px">Please download GCash with below link and register first:</dd>
                    <dd style="margin-top: 20px; margin-bottom: 20px"><a id="iOSGCash" target="_blank">iOS&nbsp;&nbsp;</a><a id="AndroidGCash" target="_blank">&nbsp;&nbsp;&nbsp;Android&nbsp;&nbsp;</a></dd>
                </dl>
            </div>
            <div align="right">
                <button class="btn" data-dismiss="modal" aria-label="Close" style="margin-bottom: 5%; margin-top: -10px; display: inline-block">Cancel</button>
                <button class="btn btn-info" onclick="exchangeGCash()" style="margin: -10px 20px 5%;display: inline-block">I've downloaded</button>
            </div>
        </div>
    </div>
</div>

<!-- tip -->
<div class="modal fade" id="tot" tabindex="-1" role="dialog" aria-labelledby="Box" aria-hidden="true" style="margin-top: 20%;">
    <div class="modal-dialog" role="document" style="border-radius: 20px;height: 100%">
        <div class="modal-content" style="border-radius: 20px;">
            <div class="modal-body">
                <h5 class="modal-title" id="copy_label"></h5>
            </div>
        </div>
    </div>
</div>

<!-- tip -->
<div class="modal fade" id="zzd" tabindex="-1" role="dialog" aria-labelledby="Box" aria-hidden="true" style="margin-top: 20%;" align="center">
    <div class="modal-dialog" role="document" style="border-radius: 20px;height: 100%">
        <div class="spinner-grow text-primary" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-secondary" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-success" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-danger" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-warning" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-info" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-light" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-dark" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
</div>
</body>

<script type="text/javascript">
    var baseUrl = "https://api.mixit.fun/";
//    var baseUrl = 'http://192.168.0.113:7001/';
    var clientHeight = document.body.clientHeight;
    var clientWidth = document.body.clientWidth;
    $('.top').css('height',170/(375/clientWidth)+"px");
    $('.d-block').css('height',clientHeight/4);
    $('#ModalExchange').css('height',clientHeight);
    $('#zzd').css('margin-top',clientHeight/2);

    $('#tips').tooltip('show');
    $('.toast').toast('show');
    let secretSign = "Wfy^%kdgfg)k!";

    $('.modal').on("hidden.bs.modal", function () {
        if($('.modal:visible').length)
        {
            $('.modal-backdrop').first().css('z-index', parseInt($('.modal:visible').last().css('z-index')) - 10);
            $('body').addClass('modal-open');
        }
    }).on("show.bs.modal", function (e) {
        if($('.modal:visible').length)
        {
            $('.modal-backdrop.in').first().css('z-index', parseInt($('.modal:visible').last().css('z-index')) + 10);
            $(this).css('z-index', parseInt($('.modal-backdrop.in').first().css('z-index')) + 10);
        }
    });

    $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
        let target = $(e.target).attr("href")
        switch (target) {
            case '#gcash':
                if ($('#gcash').html().length == 0) {
                    GetRedeem('gcash');
                }
                break;
            case '#rulesofsurvival':
                if ($('#rulesofsurvival').html().length == 0) {
                    GetRedeem('rulesofsurvival');
                }
                break;
            default:
                break;
        }
    });

    var newPlatform = "0";
    function GetRequest() {
        var url = location.search;
        var theRequest = new Object();
        if (url.indexOf("?") != -1) {
            var str = url.substr(1);
            strs = str.split("&");
            for (var i = 0; i < strs.length; i++) {
                theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
            }
        }
        newPlatform = theRequest.platform;
        return theRequest;
    }

    function showSurprise() {
        if (newPlatform == "1") {
            $('#coinDiv').hide();
            $('#activityList').hide();
        } else {
            $('#activityList').show();
            if (platform.os.toString().indexOf('iOS') > -1) {
                $('#coinDiv').show();
                $.ajax({
                    method: 'get',
                    url: baseUrl+'user/wallet',
                    headers:{
                        authorization:token
                    },
                    contentType:'application/json',
                    dataType: 'json',
                    success: function(data){
                        let watchCoin = Number(data.data.watchCoin);
                        let uploadCoin = Number(data.data.uploadCoin);
                        let inviteCoin = Number(data.data.inviteCoin);
                        let rewardCoin = (watchCoin+uploadCoin+inviteCoin);

                        $('#totalCoins').text(rewardCoin.toFixed(2));
                        $('#watchCoins').text(watchCoin.toFixed(2));
                        $('#uploadCoins').text(uploadCoin.toFixed(2));
                        $('#inviteCoins').text(inviteCoin.toFixed(2));

                        var coinLink = document.getElementById('coinLink');
                        coinLink.href = "https://mixfun.world/egg.html?id="+token;
                    }
                });
            } else {
                $('#coinDiv').hide();
            }
        }
    }

    var token =  GetRequest().id;
    $.ajax({
        method: 'get',
        url: baseUrl+'user/referralList',
        headers:{
            authorization:token
        },
        contentType:'application/json',
        dataType: 'json',
        success: function(data){
            $('#num').html(data.data.length);
            var ht = '';
            data.data.forEach(function (item,index) {
                var img = "img/person.png";
                if(item.avatar != null && item.avatar != '' && item.avatar != ' '){
                    img = item.avatar;
                }
                if (index > 9) {
                    return false;
                }
                ht+='<img src="'+img+'" style="width: 40px;height: 40px;border-radius: 20px;margin: 2px;"/>';
            });
            $('#ref').html(ht);
        }
    });

    var isBlockUser = false;
    var shopSpotDic = new Array();
    var fc;
    var lj;
    var uid;
    var iosGCashURL;
    var androidGCashURL;
    $('#gcash').html('');
    $('#rulesofsurvival').html('');
    $.ajax({
        method: 'get',
        url: baseUrl+'user/profile',
        headers:{
            authorization:token
        },
        contentType:'application/json',
        dataType: 'json',
        success: function(data){
            if (data.data.status < 0) {
                isBlockUser = true;
            }
            fc = "https://www.facebook.com/sharer/sharer.php?u=https://mixfun.world/openbox?shareCode="+data.data.ownShareCode+" &t=Please help me to win the iPhone!ðŸ“±Just click the link belowðŸ˜";
            lj = "https://mixfun.world/openbox?shareCode="+data.data.ownShareCode;
            if (data.data.avatar == null) {
                $('#tx').attr('src','img/logo_midium.png');
            } else {
                let avatarStr = data.data.avatar.trim()
                if (avatarStr == '') {
                    $('#tx').attr('src','img/logo_midium.png');
                } else {
                    $('#tx').attr('src',avatarStr);
                }
            }
            uid = data.data.uid;
            $('#mc').text(data.data.nickname);
            $('#shareId').val(data.data.ownShareCode);
            iosGCashURL = 'https://clk.omgt3.com/?PID=36035&AID=1980884&UID='+data.data.ownShareCode;
            androidGCashURL = 'https://clk.omgt3.com/?PID=36032&AID=1980884&UID='+data.data.ownShareCode;
            $('#iOSGCash').attr('href', 'https://clk.omgt3.com/?PID=36035&AID=1980884&UID='+data.data.ownShareCode);
            $('#AndroidGCash').attr('href', 'https://clk.omgt3.com/?PID=36032&AID=1980884&UID='+data.data.ownShareCode);
            $('#androidAtomeURL').attr('href', 'https://clk.omgt3.com/?PID=35545&AID=1980884&UID='+data.data.ownShareCode);
            $('#copy').attr('data-clipboard-text',data.data.ownShareCode);
            if(data.data.shareCode != null){
                $('.shade').css('display','none');
            }
            $('#lj').val("https://mixfun.world/openbox?shareCode="+data.data.ownShareCode);
            $('.fc').attr('href',"https://www.facebook.com/sharer/sharer.php?u=https://mixfun.world/openbox?shareCode="+data.data.ownShareCode+" &t=Please help me to win the iPhone!ðŸ“±Just click the link belowðŸ˜");
            $('#wc').attr('href',"https://api.whatsapp.com/api/send?phone=+8618682018597&send?text=Please help me to win the iPhone!ðŸ“±Just click the link belowðŸ˜  https://mixfun.world/openbox?shareCode="+data.data.ownShareCode);
            GetRedeem('gcash');
            $.ajax({
                method: 'post',
                url: baseUrl+'shop/list',
                headers:{
                    authorization:token
                },
                data: {
                    type: 1
                },
                dataType: 'json',
                success: function(data) {
                    if(data.status == 0) {
                        var ht = '<p style="color: #ff000080;margin-top: 5px;width: 95%" class="alert alert-primary">Items will be restocked by every 1000 new users.</p>';
                        data.data.forEach(function(item, index) {
                            var spot = item.glh;
                            if (isBlockUser) {
                                spot = 0;
                            }
                            shopSpotDic[item.id] = spot;
                            ht+= '<div class="media"style="padding: 3%">'+
                                '<div style="width: 25%;">' +
                                '<img src="'+item.img+'" class="align-self-start mr-sm-2" style="width: 100%;border-radius: 5px;"/>' +
                                '<div style="width: 100%;height: 20px;background-color: #1b1e21;color: white;opacity: 0.6;margin-top: -20px;">'+item.sale+' coin</div>'+
                                '</div>'+
                                '<div class="media-body" style="padding-left: 3%;">'+
                                '<div class="mt-0"><p style="width: 100%;margin: 0px;text-align: left;"><span style="width: 80%;">'+item.name+'</span><span style="color: #9B9B9B;float: right;font-size: small;">Daily Totalï¼š'+item.amount+'</span></p></div>'+
                                '<p style="margin-top: 2px;margin-bottom: 5px;text-align: left;">'+item.description+'</p>'+
                                '<div class="mt-0">' +
                                '<p style="width: 100%;text-align: left;"><span id="shop'+item.id+'">Spot: '+spot+'</span>' +
                                '<button class="btn-sm" style="float: right;background: linear-gradient(to right, #F45D82, #6C81F8);border-radius: 20px;border: 0px;color: white;" onclick="cj('+item.id+',\''+item.name+'\','+item.sale+',2)">&nbsp;Redeem&nbsp;</button></p></div>'+
                                '</div>'+
                                '</div>';
                        });
                        $('#draw').html(ht);
                    }
                }
            });

            $.ajax({
                method: 'post',
                url: baseUrl+'shop/list',
                headers:{
                    authorization:token
                },
                data: {
                    type: 2
                },
                dataType: 'json',
                success: function(data) {
                    if(data.status == 0) {
                        var ht = '<p style="color: #ff000080;margin-top: 5px;width: 95%" class="alert alert-primary">Items will be restocked by every 1000 new users. (Philippines region ONLY)</p>';
                        data.data.forEach(function(item, index) {
                            var spot = item.glh;
                            if (isBlockUser) {
                                spot = 0;
                            }
                            shopSpotDic[item.id] = spot;
                            ht+= '<div class="media"style="padding: 3%">'+
                                '<div style="width: 25%;">' +
                                '<img src="'+item.img+'" class="align-self-start mr-sm-2" style="width: 100%;border-radius: 5px;"/>' +
                                '<div style="width: 100%;height: 20px;background-color: #1b1e21;color: white;opacity: 0.6;margin-top: -20px;">'+item.sale+' coin</div>'+
                                '</div>'+
                                '<div class="media-body" style="padding-left: 3%;">'+
                                '<div class="mt-0"><p style="width: 100%;margin: 0px;text-align: left;"><span style="width: 80%;">'+item.name+'</span><span style="color: #9B9B9B;float: right;font-size: small;">Daily Totalï¼š'+item.amount+'</span></p></div>'+
                                '<p style="margin-top: 2px;margin-bottom: 5px;text-align: left;">'+item.description+'</p>'+
                                '<div class="mt-0">' +
                                '<p style="width: 100%;text-align: left;"><span id="shop'+item.id+'">Spot: '+spot+'</span>' +
                                '<button class="btn-sm" style="float: right;background: linear-gradient(to right, #F45D82, #6C81F8);border-radius: 20px;border: 0px;color: white;" onclick="cj('+item.id+',\''+item.name+'\','+item.sale+',2)">&nbsp;Redeem&nbsp;</button></p></div>'+
                                '</div>'+
                                '</div>';
                        });
                        $('#buy').html(ht);
                    }
                }
            });
        }
    });

    function setShareCode(){
        var shareCode = $('#shareCode').val();
        $.ajax({
            url : baseUrl+"/user/setFriendShareCode",
            type : 'post',
            dataType : 'json',
            data: JSON.stringify({
                share_code:shareCode
            }),
            contentType:'application/json',
            headers:
                {
                    authorization: token
                },
            success: function(data){
                if(data.status == 0){
                    $('#alert').html('<p>Congratulations!</p><p>Both of you and your friends are received the 50 coin.</p>');
                    $('#ModalAlert').modal('show');
                    $('.shade').css('display','none');
                }else{
                    $('#alert').html('<p>'+data.msg+'</p>');
                    $('#ModalAlert').modal('show');
                }

            }
        });
    }

    function cj(it,name,sale,type,commodity_id){
        if (shopSpotDic[it] > 0) {
            if (isBlockUser) {
                var msg = "We launched an algorithm to detect coin farming and spam activities. Your account has been blocked from prized redeem due to suspected activiteies. If you think it's a mistake, please appeal by sending email to Hello@mixfun.world. We'll review it ASAP.";
                $('#alert').html('<p>'+msg+'</p>');
                $('#ModalAlert').modal('show');
            } else {
                if (name == 'GCash') {
                    $('#ModalDownloadGCash').modal('show');
                } else {
                    $('#ModalConf').modal('show');
                }
                $('#it').val(it);
                $('#itname').val(name);
                $('#ittype').val(type);
                $('#commodity_id').val(commodity_id);
                if(type == 1){
                    $('#type2').css('display','none');
                    $('#type1').css('display','block');
                }else{
                    $('#type1').css('display','none');
                    $('#type2').css('display','block');
                }
                $('.hf').text(sale);
            }
        } else {
            let msg = "The stock is out now, items will be restocked by every 1000 new users. Please come back later.";
            $('#alert').html('<p>'+msg+'</p>');
            $('#ModalAlert').modal('show');
        }
    }

    function exchangeGCash() {
        $('#ModalDownloadGCash').modal('hide');
        $('#ModalDownloadGCash').on('hidden.bs.modal', function () {
            $('#ModalDownloadGCash').off('hidden.bs.modal');
            $('#ModalConf').modal('show');
        });
    }

    function dde(name, data) {
        if(name == 'Mini Beans') {
            let it = $('#it').val();
            let sopt = shopSpotDic[it];
            let subSopt = Math.max(0, sopt-1);
            shopSpotDic[id] = subSopt;
            $('#shop'+it).html('Spot: '+subSopt);
            $('#miniworldID').text(data.data.recipient);
            $('#ModalMiniworld').modal('show');
        } else {
            $('#address').val('');
            $('#phone').val('');
            $('#phoneType').val('');
            $('#moblieLegend').val('');
            $('#moblieLegendExtra').val('');
            $('#rosInput').val('');
            $('#gcashAccount').val('');
            if(name == 'Mobile Legends') {
                $('#gcashAccount').css('display', 'none');
                $('#rosInput').css('display', 'none');
                $('#address').css('display','none');
                $('#phone').css('display','none');
                $('#phoneType').css('display','none');
                $('#moblieLegend').css('display','inline-block');
                $('#moblieLegendExtra').css('display','inline-block')
            } else if(name == 'Rules of Survival') {
                $('#gcashAccount').css('display', 'none');
                $('#address').css('display','none');
                $('#phone').css('display','none');
                $('#phoneType').css('display','none');
                $('#moblieLegend').css('display','none');
                $('#moblieLegendExtra').css('display','none');
                $('#rosInput').css('display', 'block');
            } else if (name == 'GCash') {
                $('#address').css('display','none');
                $('#phone').css('display','none');
                $('#phoneType').css('display','none');
                $('#moblieLegend').css('display','none');
                $('#moblieLegendExtra').css('display','none');
                $('#rosInput').css('display', 'none');
                $('#gcashAccount').css('display', 'block');
            } else {
                $('#gcashAccount').css('display', 'none');
                $('#rosInput').css('display', 'none');
                $('#address').css('display','block');
                $('#phone').css('display','block');
                $('#phoneType').css('display','block');
                $('#moblieLegend').css('display','none');
                $('#moblieLegendExtra').css('display', 'none');
            }
            $('#ModalExchange').modal('show');
            $('#id').val(data.data.id);
        }
    }

    var ss;
    var gmfh;
    var hasVerify = true;
    function cjl(){
        if (hasVerify) {
            var it = $('#it').val();
            var gmname = $('#itname').val();
            var type = $('#ittype').val();
            var time = new Date().getTime();
            var key = md5(uid+secretSign+time);
            var url = baseUrl+'shop/exchange';
            if (gmname == 'Mini Beans') {
                url = baseUrl+'shop/exchangeGameCode';
            }
            $('#ModalConf').modal('hide');
            $.ajax({
                method: 'post',
                url: url,
                headers:{
                    authorization:token
                },
                data: {
                    commodityId: it,
                    type: type,
                    requestTime: time,
                    sign: key
                },
                dataType: 'json',
                success: function(data) {
                    if (data.status == 0) {
                        $('#zzd').modal('show');
                    } else {
                        let msg = data.msg;
                        if (msg == "The stock for this hour is out. Please come back next hour.") {
                            msg = "The stock is out now, items will be restocked by every 1000 new users. Please come back later.";
                            $('#alert').html('<p>'+msg+'</p>');
                            $('#ModalAlert').modal('show');
                        } else {
                            $('#alert').html('<p>'+msg+'</p>');
                            $('#ModalAlert').modal('show');
                        }
                    }
                    $('#commodity_id').val(it);
                    $('#zzd').on('shown.bs.modal',function () {
                        gmfh = data;
                        var timeout = setTimeout(function () {
                            $('#zzd').modal('hide');
                        },1200);
                    });
                },
                error: function(){
                    $('#alert').html('<p>Net Error!</p>');
                    $('#ModalAlert').modal('show');
                }
            });
            $('#zzd').on('hide.bs.modal', function () {
                dde(gmname, gmfh);
            })
        } else {
            $('#copy_label').text('Please verify first');
            $('#tot').modal('show');
        }
    }

    function buy(){
        var id = $('#id').val();
        var commodity_id = $('#commodity_id').val();
        var name = $('#itname').val();
        var recipient = $('#recipient').val();
        var playerID;
        if(name == 'Mobile Legends') {
            var moblieLegend = $('#moblieLegend').val();
            var moblieLegendExtra = $('#moblieLegendExtra').val();
            if (moblieLegend == null || moblieLegend == '' || moblieLegendExtra == null || moblieLegendExtra == ''){
                $('#bt').text('Please fill up all your details.');
                return;
            }
            playerID = moblieLegend+"("+moblieLegendExtra+")";
        } else if(name == 'Rules of Survival') {
            var rosID = $('#rosInput').val();
            if (rosID == null || rosID == ''){
                $('#bt').text('Please fill up all your details.');
                return;
            }
            playerID = rosID;
        } else  if(name == 'GCash') {
            var gcashID = $('#gcashAccount').val();
            if (gcashID == null || gcashID == ''){
                $('#bt').text('Please fill up all your details.');
                return;
            }
            playerID = gcashID;
        } else{
            if (recipient == null || recipient == ''){
                $('#bt').text('Please fill up all your details.');
                return;
            }
            var phone = $('#phone').val();
            if (phone == null || phone == ''){
                $('#bt').text('Please fill up all your details.');
                return;
            }

            var address = $('#address').val();
            if (address == null || address == ''){
                $('#bt').text('Please fill up all your details.');
                return;
            }

            var phoneType = $('#phoneType').val();
            if (phoneType == null || phoneType == ''){
                $('#bt').text('Please fill up all your details.');
                return;
            }
        }
        $.ajax({
            url : baseUrl+"shop/buy",
            type : 'post',
            dataType : 'json',
            data: {
                id: id,
                commodityId:commodity_id,
                recipient:recipient,
                phone: phone,
                moblieLegend: playerID,
                address: address,
                phoneType: phoneType
            },
            headers:
                {
                    authorization: token
                },
            success: function(data){
                var storeLink = 'https://mixfun.world/index.html';
                var userAgentInfo = navigator.userAgent;
                if (userAgentInfo.indexOf('iPhone') > 0) {
                    storeLink = 'https://itunes.apple.com/ph/app/id1450796214?mt=8';
                } else if (userAgentInfo.indexOf('Android') > 0) {
                    storeLink = 'https://play.app.goo.gl/?link=https://play.google.com/store/apps/details?id=com.mixit.fun';
                }
                $('#ModalExchange').modal('hide');
                if(name == 'GCash') {
                    $('#alert').html('<br>MixFun & GCash will review your registration as soon as possible( about 1 month). Once confirmed you are new users, you will receive money in 3 days.</br></br>If you enjoy using MixFun, please leave a good review for us? Thank you for your support! </p>' +
                        '<a class="btn btn-info" href="'+storeLink+'" target="_blank">YES</a>' +
                        '<a class="btn " id="pj" style="padding-left: 20%"  href="'+storeLink+'" data-dismiss="modal" target="_blank">NO</a>');
                } else {
                    $('#alert').html('<p>If you enjoy using MixFun, please leave a good review for us? Thank you for your support! </p>' +
                        '<a class="btn btn-info" href="'+storeLink+'" target="_blank">YES</a>' +
                        '<a class="btn " id="pj" style="padding-left: 20%"  href="'+storeLink+'" data-dismiss="modal" target="_blank">NO</a>');
                }
                $('#ModalAlert').modal('show');
                let sopt = shopSpotDic[commodity_id];
                let subSopt = Math.max(0, sopt-1);
                shopSpotDic[commodity_id] = subSopt;
                $('#shop'+commodity_id).html('Spot: '+subSopt);
            }
        });
    }


    function exModelShow(){
        var buttonTap = true;
        $('#ModalAlert').modal('hide');
        $('#ModalAlert').on('hidden.bs.modal', function () {
            $('#ModalAlert').off('hidden.bs.modal');
            if (!buttonTap) {
                return;
            }
            buttonTap = false;
            $('#ModalExchange').modal('show');
        });
    }

    $('#ModalExchange').on('hide.bs.modal',function(){
        $('#ModalAlert').modal('show');
        $('#alert').html('<p style="color: red;">Confirm to quit? If you quitted, you wonâ€™t able to redeem the gift. </p><button class="btn btn-info" data-dismiss="modal" aria-label="Close" style="margin-left: 20%">Quit</button><button class="btn" onclick="exModelShow()" style="margin-left: 20%">Cancel</button>');
    });

    function copy(id){
        var copyVal = $('#'+id).val();
        if(copyVal != ''){
            var clipboard = new ClipboardJS('.'+id, {
                text: function() {
                    return copyVal;
                }
            });
            clipboard.on('successfully', function(e){
                clip.destroy();
            });
            $('#copy_label').text('Copied!');
            $('#tot').modal('show');
        }else{
            $('#copy_label').text('Please login');
            $('#tot').modal('show');
        }
    }

    var clip = new ClipboardJS('.btn');
    clip.on('successfully', function(e){
        clip.destroy();
    });
    function copy2(){
        $('#copy_label').text('Copied!');
        $('#tot').modal('show');
    }

    $('#tot').on('shown.bs.modal', function (e) {
        setTimeout(function () {
            $('#tot').modal('hide');
        },500)
    })

    $(function () {
        let slider = new SliderUnlock("#slider", {}, function () {
            hasVerify = true;
        });
        slider.init();
    })

    function GetRedeem(name) {
        let type;
        let redeemType;
        if (name == 'gcash') {
            type = 5;
            redeemType = 2;
        } else if (name == 'rulesofsurvival') {
            type = 4;
            redeemType = 4;
        }
        $.ajax({
            method: 'post',
            url: baseUrl+'shop/list',
            headers:{
                authorization:token
            },
            data:{
                type: type
            },
            dataType: 'json',
            success: function(data) {
                if(data.status == 0) {
                    var ht;
                    var imageURL = '';
                    if (name == 'gcash') {
                        imageURL = 'img/shop_gcash.png';
                        ht = '<p style="color: #ff000080;margin-top: 5px;width: 95%; text-align: left" class="alert alert-primary">Only available for the newly downloaded and registered GCash user.<br>Download now:<a target="_blank" href='+iosGCashURL+'>&nbsp;&nbsp;iOS&nbsp;&nbsp;</a><a target="_blank" href='+androidGCashURL+'>&nbsp;&nbsp;&nbsp;Android&nbsp;&nbsp;</a></p>';
                    } else {
                        ht = '<p style="margin-top: 5px"></p>';
                    }
                    data.data.forEach(function(item, index) {
                        if (imageURL == '') {
                            imageURL = item.img;
                        }
                        var spot = item.glh;
                        shopSpotDic[item.id] = spot;
                        ht+= '<div class="media"style="padding: 3%">'+
                            '<div style="width: 25%;">' +
                            '<img src="'+imageURL+'" class="align-self-start mr-sm-2" style="width: 100%;border-radius: 5px;"/>' +
                            '<div style="width: 100%;height: 20px;background-color: #1b1e21;color: white;opacity: 0.6;margin-top: -20px;">'+item.sale+' coin</div>'+
                            '</div>'+
                            '<div class="media-body" style="padding-left: 3%;">'+
                            '<div class="mt-0"><p style="width: 100%;margin: 0px;text-align: left;"><span style="width: 80%;">'+item.name+'</span><span style="color: #9B9B9B;float: right;font-size: small;">Daily Totalï¼š'+item.amount+'</span></p></div>'+
                            '<p style="margin-top: 2px;margin-bottom: 5px;text-align: left;">'+item.description+'</p>'+
                            '<div class="mt-0">' +
                            '<p style="width: 100%;text-align: left;"><span id="shop'+item.id+'">Spot: '+spot+'</span>' +
                            '<button class="btn-sm" style="float: right;background: linear-gradient(to right, #F45D82, #6C81F8);border-radius: 20px;border: 0px;color: white;" onclick="cj('+item.id+',\''+item.name+'\','+item.sale+','+redeemType+')">&nbsp;Redeem&nbsp;</button></p></div>'+
                            '</div>'+
                            '</div>';
                    });
                    $('#'+name).html(ht);
                }
            }
        });
    }
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-138276305-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-138276305-1', {
        'page_title' : 'MixFun',
        'page_path': '/shop'
    });
</script>
</html>