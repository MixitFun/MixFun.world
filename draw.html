<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>MixFun</title>
    <link rel="icon" href="img/logo.png" type="image/x-icon">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta property="og:url" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Please help me to win the iPhone!ðŸ“±Just click the link belowðŸ˜" />
    <meta property="og:description" content="Please help me to win the iPhone!ðŸ“±Just click the link belowðŸ˜" />
    <meta property="og:image" content="images/share-logo.png" />
    <link rel="icon" href="img/logo.png" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="css/bootstrap-grid.css"/>
    <link rel="stylesheet" type="text/css" href="css/bootstrap-reboot.css"/>
    <link rel="stylesheet" type="text/css" href="css/jquery.slider.css"/>
</head>

<script src="https://code.jquery.com/jquery-3.4.0.js"></script>
<script src="js/bootstrap.js"></script>
<script src="js/bootstrap.bundle.js"></script>
<script src="js/clipboard.min.js"></script>
<script src="http://cdn.bootcss.com/blueimp-md5/1.1.0/js/md5.min.js"></script>  
<script src="js/jquery.slider.min.js" type="text/javascript"></script>
<style>
    .top{
        background-image: url("img/bg_new.png");
        background-repeat: no-repeat;
        background-size: 100%;
    }
    .tooltip-inner{
        background-color: #b3d7ff;
        color: #6974FF;
        max-width: 300px;
    }
    .bs-tooltip-top .arrow::before, .bs-tooltip-auto[x-placement^="top"] .arrow::before{
        border-top-color: #b3d7ff;
    }
    .tooltip{
        align-content: center;
        z-index: -1;
    }
    input{
        margin-top: 15px;
    }
    textarea{
        margin-top: 15px;
    }
    li:hover{
        background-color: #adb5bd;
    }
    .nav-link.active{
        color: #007bff;
    }
    body.modal-open {
        overflow: hidden;
        position: fixed;
    }
    body.viewport-lg {
        position: absolute; 
    }
    body {
        overflow-x: hidden;
        overflow-y: scroll !important;
    }
</style>
<body>
<div class="container" style="padding:0;background-color: #f7f7fb;" align="center">
    <div align="center" style="position: relative;">
        <img src="img/fun_draw_banner.png" style="width: 100%;">
        <button class="btn" style="position: absolute; background-image: url(img/btn_treasury_hunt.png); background-size: cover; border: 0; outline: none; top: 10%; right: 0; height: 27px; width: 135px" onclick="ShowNotice()"></button>
    </div>

    <div style="margin-top: 20px;border-width: thin;border-color: #9B9B9B;">
        <ul class="nav nav-tabs">
            <li class="nav-item" style="width: 33%">
                <a class="nav-link active" href="#draw2" data-toggle="tab" id="tabIn2">Product</a>
            </li>
            <li class="nav-item" style="width: 33%">
                <a class="nav-link" href="#History" data-toggle="tab">History</a>
            </li>
            <li class="nav-item" style="width: 33%">
                <a class="nav-link" href="#Result" data-toggle="tab">Result</a>
            </li>
        </ul>
        <div id="myTabContent" class="tab-content" style="background-color: white">
            <div class="tab-pane fade in active show product" id="draw2" style="padding-top: 3%"></div>
            <div class="tab-pane fade" id="History"></div>
            <div class="tab-pane fade" id="Result"></div>
        </div>
    </div>

</div>

<!-- alert -->
<div class="modal fade" id="ModalAlert" tabindex="-1" role="dialog" aria-labelledby="ModalNoticeTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document" style="border-radius: 20px;">
        <div class="modal-content" style="border-radius: 20px;">
            <div class="modal-header" style="background: linear-gradient(to right, #b4d0ef, #e4f1f8);border-radius: 20px 20px 0 0;">
            <h5 class="modal-title" id="ModalNoticeTitle">Message</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
            </div>
            <div class="modal-body" id="alert"></div>
        </div>
    </div>
</div>

<!-- tip -->
<div class="modal fade" id="tot" tabindex="-1" role="dialog" aria-labelledby="Box" aria-hidden="true" style="margin-top: 20%;">
    <div class="modal-dialog" role="document" style="border-radius: 20px;height: 100%">
        <div class="modal-content" style="border-radius: 20px;">
            <div class="modal-header">
                <h5 class="modal-title" id="copy_label">
                </h5>
            </div>
        </div>
    </div>
</div>

<!-- tip -->
<div class="modal fade" id="zzd" tabindex="-1" role="dialog" aria-labelledby="Box" aria-hidden="true" style="margin-top: 20%;" align="center">
    <div class="modal-dialog" role="document" style="border-radius: 20px;height: 100%">
        <div class="spinner-grow text-primary" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-secondary" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-success" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-danger" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-warning" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-info" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-light" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-dark" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
</div>
<div class="modal fade" id="zzdr" tabindex="-1" role="dialog" aria-labelledby="Box" aria-hidden="true" style="margin-top: 20%;" align="center">
    <div class="modal-dialog" role="document" style="border-radius: 20px;height: 100%">
        <div class="spinner-grow text-primary" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-secondary" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-success" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-danger" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-warning" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-info" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-light" role="status">
            <span class="sr-only">Loading...</span>
        </div>
        <div class="spinner-grow text-dark" role="status">
            <span class="sr-only">Loading...</span>
        </div>
    </div>
</div>

<!-- Modal -->
<div class="modal fade" id="ModalJoin" tabindex="-1" role="dialog" aria-labelledby="ModalNoticeTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document" style="border-radius: 20px;">
    <div class="modal-content" style="border-radius: 20px;">
        <div>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="height: 40px; width: 60px">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="modal-body" align="center" style="padding-top: 0">
            <div>
            	<p style="text-align: left;">Please select the lucky token amount</p>
            </div>
            <div style="display: inline-flex; width: 60%" align="center">
                <button class="btn" style="background-image: url(img/draw_reduce.png); background-size: cover; border: 0; outline: none; height: 28px; width: 28px" onclick="amountReduce()"></button>
                <p style="width: 70%;" id="amountNum"></p>
                <button class="btn" style="background-image: url(img/draw_add.png); background-size: cover; border: 0; outline: none; height: 28px; width: 28px" onclick="amountAdd()"></button>
            </div>
            <p style="color: #9B9B9B;font-size: medium; margin-bottom: 0"><span id="totalExpense" style="color: #F76B1C"></span> PHP</p>
            <p style="margin-top: 3%; margin-bottom: 0; text-align: left">Your information</p>
            <span id="bt" style="color: red;"></span>
            <input class="form-control" type="text" id="phone" placeholder="Enter your phone number" style="border-radius: 15px;background-color: #F1F1F1;border: 0px;"/>
            <p style="margin-top: 10px; margin-bottom: 0; text-align: left">*Optional</p>
            <input class="form-control" type="text" id="moblieLegend" placeholder="Mobile Legends ID:12345678" maxlength="9" style="border-radius: 15px;background-color: #F1F1F1;border: 0px; width: 78%; margin-top: 3px; display: inline-block;"/>
            <input class="form-control" type="text" id="moblieLegendExtra" placeholder="1234" maxlength="4" style="border-radius: 15px;background-color: #F1F1F1;border: 0px; width: 20%; margin-top: 3px; display: inline-block;"/>
            <p style="text-align: left; margin-top: 5%">Payment method</p>
            <button class="btn" id="globeBtn" style="background: #6C81F8;border-radius: 20px;border: 0;color: white; width: 80%; height: 40px; font-size: 14px; font-weight: 600;" onclick="selectGlobe()">Send load with Globe</button>
            <button class="btn" id="smartBtn" style="background: #6C81F8;border-radius: 20px;border: 0;color: white; width: 80%; height: 40px; font-size: 14px; font-weight: 600; margin-top: 20px" onclick="selectSmart()">Send load with Smart</button>
        </div>
    </div>
  </div>
</div>

<div class="modal fade" id="ModalNotice" tabindex="-1" role="dialog" aria-labelledby="ModalNoticeTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document" style="border-radius: 20px;">
        <div class="modal-content" style="border-radius: 20px;">
            <div class="modal-header" style="background: linear-gradient(to right, #b4d0ef, #e4f1f8);border-radius: 20px 20px 0 0;">
                <h5 class="modal-title" id="ModalNoticeTitle">More information</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <dl>
                    <dt>Lucky 10PHP</dt>
                    <dd style="margin-top: 5px">Do you believe in luck?Â Spend 10PHP to exchange mobile loads/Mobile Legends diamonds or an iPhone.Â We have prepared more than 1000 prizes for you. </dd>
                    <dt>How to win?</dt>
                    <dd style="margin-top: 5px">1. Pay 10PHP for 10 lucky tokens</dd>
                    <dd>2. Wait until the lucky pool is full</dd>
                    <dd style="margin-bottom: 30px">3. 1,002 WinnersÂ will win the prizes</dd>
                    <dd style="margin-top: 5px">The sooner the pool is full, the earlier the winner get the prize redemption.</dd>
                </dl>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ModalCash" tabindex="-1" role="dialog" aria-labelledby="ModalNoticeTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document" style="border-radius: 20px;">
        <div class="modal-content" style="border-radius: 20px;">
            <div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="height: 40px; width: 60px">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="CashMethod" align="center" style="padding-top: 0">
            </div>
            <div align="right">
                <button class="btn" data-dismiss="modal" aria-label="Close" style="margin-bottom: 5%; margin-top: -10px; display: inline-block">Cancel</button>
                <button class="btn btn-info" onclick="haveCash()" style="margin: -10px 20px 5%;display: inline-block">I Have Sent</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ModalCashResult" tabindex="-1" role="dialog" aria-labelledby="ModalNoticeTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document" style="border-radius: 20px;">
        <div class="modal-content" style="border-radius: 20px;">
            <div>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" style="height: 40px; width: 60px">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" align="center" style="padding-top: 0">
                <p><img style="width: 28px; height: 28px; margin-right: 20px" src="img/draw_success.png">SUCCESSFUL</p>
                <p style="text-align: center; margin-top: 20px; margin-bottom: 10px; font-size: 17px; font-weight: 700">Lucky Code</p>
                <table id="resultTable" style="width: 100%; text-align: center; line-height: 24px;">
                </table>
                <hr style="height:1px; margin: 20px 8%;"/>
                <p style="text-align: left; margin-top: 20px; margin-bottom: 10px; font-size: 14px; font-weight: 600">Refer to a friend to get a extra lucky</p>
                <row>
                    <a class="col-4 fc" style="padding: 10%"  href="" target="_blank">
                        <img  id="tips" src="img/icon_facebook.png" data-toggle="popover" data-placement="top" data-content="Share the referral link to your friend and both of you will win 50 coins.">
                    </a>
                    <a class="col-4 lj" style="padding: 10%" target="_blank" onclick="copy('lj')">
                        <input id="lj" type="hidden">
                        <img src="img/icon_ic_link.png">
                    </a>
                </row>
            </div>
        </div>
    </div>
</div>

</body>

<script type="text/javascript">
    var baseUrl = "https://api.mixit.fun";
    var clientHeight = document.body.clientHeight;
    var clientWidth = document.body.clientWidth;
    $('.top').css('height',170/(375/clientWidth)+"px");
    $('.d-block').css('height',clientHeight/4);
    $('#zzd').css('margin-top',clientHeight/2);

    $('#tips').tooltip('show');
    $('.toast').toast('show');

    var scrollTopPosition = 0;
    var lastKnownScrollTopPosition = 0;
    $(document).ready(function(){
        if( navigator.userAgent.match(/iPhone|iPad|iPod|Android/i)) {
            $(window).scroll(function () {
                scrollTopPosition = $(document).scrollTop();
            });
            $('.modal').on('show.bs.modal', function () {
                $('body').css('top', (scrollTopPosition * -1));
                lastKnownScrollTopPosition = scrollTopPosition;
            });
            $('.modal').on('hidden.bs.modal', function () {
                $('body').scrollTop(lastKnownScrollTopPosition);
            });
        }
    });

    function GetRequest() {
        var url = location.search;
        var theRequest = new Object();
        if (url.indexOf("?") != -1) {
            var str = url.substr(1);
            strs = str.split("&");
            for (var i = 0; i < strs.length; i++) {
                theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
            }
        }
        return theRequest;
    }
    var token =  GetRequest().id;
    $.ajax({
        method: 'post',
        url: baseUrl+'/treasury/token/num',
        headers:{
            authorization:token
        },
        dataType: 'json',
        success: function(data) {
            if(data.status == 0) {
                let tokenNum = data.data.tokenNum;
                let userNum = Math.max(100, data.data.userNum);
                $('#joinNum').text(userNum);
                let persent = Math.max(0.1, tokenNum/100000);
                var persentStr = Number(persent*100).toFixed(2);
                persentStr += '%';
                document.getElementById('progressbar').style.width = persentStr;
            }
        }
    });

    GetProduct();
    function GetProduct() {
        var imageURL = 'img/draw_product_iphone.png';
        var name = 'iPhone 8';
        var ht = '<div class="media" style="padding: 3%; display: inline-block; width: 90%">'+
                        '<div style="width: 100%;">' +
                        '<img src="'+imageURL+'" class="align-self-start mr-sm-2" style="width: 100%;border-radius: 10px;"/>' +
                        '<div style="width: 100%;color: #000000e6; opacity: 0.6;border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;">'+name+'</div></div></div>';
        imageURL = 'img/draw_product_vivo.png';
        name = 'Vivo Y53';
        ht += '<div class="media" style="padding: 3%; display: inline-block; width: 90%">'+
                        '<div style="width: 100%;">' +
                        '<img src="'+imageURL+'" class="align-self-start mr-sm-2" style="width: 100%;border-radius: 10px;"/>' +
                        '<div style="width: 100%;color: #000000e6;opacity: 0.6; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;">'+name+'</div></div></div>';
        imageURL = 'img/draw_product_ml.png';
        name = '500 MLBB (11 Dias)';
        ht += '<div class="media" style="padding: 3%; display: inline-block; width: 90%">'+
                        '<div style="width: 100%;">' +
                        '<img src="'+imageURL+'" class="align-self-start mr-sm-2" style="width: 100%;border-radius: 10px;"/>' +
                        '<div style="width: 100%;color: #000000e6;opacity: 0.6; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;">'+name+'</div></div></div>';
        imageURL = 'img/draw_product_mload.png';
        name = '500 Mobile Loads (10PHP)';
        ht += '<div class="media" style="padding: 3%; display: inline-block; width: 90%">'+
                        '<div style="width: 100%;">' +
                        '<img src="'+imageURL+'" class="align-self-start mr-sm-2" style="width: 100%;border-radius: 10px;"/>' +
                        '<div style="width: 100%;color: #000000e6;opacity: 0.6;border-bottom-left-radius: 10px; border-bottom-right-radius: 10px;">'+name+'</div></div></div>';

        ht += '<div class="progress" style="width: 60%; margin-top: 5%">'+
              '<div class="progress-bar" id="progressbar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 0%; background-color: #F76B1C">'+
              '<span class="sr-only"></span>'+
              '</div></div>';
        ht += '<p style="color: #9B9B9B;font-size: small; margin-top: 8px"><span id="joinNum" style="color: #F76B1C"></span> lucky people in the pool</p>';
        ht += '<button class="btn" style="background: linear-gradient(270deg,rgba(244,93,130,1) 0%,rgba(108,129,248,1) 100%); box-shadow:0px 4px 8px 0px rgba(146,64,236,0.25);border-radius: 25px;border: 0px;color: white; width: 80%; height: 50px; font-size: 18px; margin-bottom: 5%;" onclick="Join()">Join</button>'
        $('.product').html(ht);
    }

    function Join() {
        $('#phone').val('');
        $('#moblieLegend').val('');
        $('#moblieLegendExtra').val('');
        $('#bt').text('');
        $('#ModalJoin').modal('show');
    }

    function copy(id){
        var copyVal = $('#'+id).val();
        if(copyVal != ''){
            var clipboard = new ClipboardJS('.'+id, {
                text: function() {
                    return copyVal;
                }
            });
            $('#copy_label').text('Copied!');
            // $('#tot').modal('show');
        }else{
            $('#copy_label').text('Please login');
            // $('#tot').modal('show');
        }
    }

    var orderCode = '';
    function buyAmount(cashType) {
        var buttonTap = true;
        let phone = $('#phone').val();
        let moblieLegend = $('#moblieLegend').val();
        let moblieLegendExtra = $('#moblieLegendExtra').val();
        var mlinfo = moblieLegend;
        let totalExpense = $('#totalExpense').text();
        if (phone == null || phone == '') {
            $('#bt').text('Please fill up your Phone Number.');
            return;
        }
        if (moblieLegendExtra.length > 0) {
            mlinfo += "("+moblieLegendExtra+")";
        }
        $('#ModalJoin').modal('hide');
        $('#ModalJoin').on('hidden.bs.modal', function () {
            if (!buttonTap) {
                return;
            }
            buttonTap = false;
            $('#zzd').modal('show');
            var isError = false;
            var errorMsg = '';
            $.ajax({
                method: 'post',
                url: baseUrl + '/treasury/order/token/create',
                headers: {
                    authorization: token
                },
                data: JSON.stringify({
                    pnum: amountNum,
                    amount: totalExpense,
                    mobile: phone,
                    legends: mlinfo,
                }),
                contentType:'application/json',
                dataType: 'json',
                success: function (data) {
                    if (data.status == 0) {
                        orderCode = data.data;
                    } else {
                        isError = true;
                        errorMsg = data.msg;
                    }
                },
                error: function () {
                    isError = true;
                    errorMsg = 'Net Error!';
                }
            });
            $('#zzd').on('shown.bs.modal',function () {
                var timeout = setTimeout(function () {
                    $('#zzd').modal('hide');
                },1200);
            });
            $('#zzd').on('hidden.bs.modal', function () {
                if (isError) {
                    $('#alert').html('<p>' + errorMsg + '</p>');
                    $('#ModalAlert').modal('show');
                } else {
                    if (cashType == 'globe') {
                        var notice = '<dl style="text-align: left"><dt>Globe</dt>';
                        notice += '<dd style="margin-top: 10px">1. CopyÂ 29754740270.</dd>';
                        notice += '<dd>2. Text '+totalExpense+' PHP.</dd>';
                        notice += '<dd>3. Receive confirmation SMS and reply â€œYes".</dd>';
                        notice += '<dd style="margin-top: 15px; margin-bottom: 15px">*Each Share-A-Load transaction is charged P1.</dd>';
                        notice += '</dl>';
                        $('#CashMethod').html(notice);
                    } else {
                        var notice = '<dl style="text-align: left"><dt>Smart</dt>';
                        notice += '<dd style="margin-top: 10px">1. Send toÂ 808</dd>';
                        notice += '<dd>2. CopyÂ PASALOAD 09611457667 '+totalExpense+' PHP.</dd>';
                        notice += '<dd style="margin-top: 15px; margin-bottom: 15px">*The amount transferred plus the P1 SMS fee will be charged on top of your Monthly Service Fee (MSF).</dd>';
                        notice += '</dl>';
                        $('#CashMethod').html(notice);
                    }
                    $('#ModalCash').modal('show');
                }
            })
        })
    }

    getHistory();
    function getHistory() {
        $.ajax({
            method: 'post',
            url: baseUrl + '/treasury/user/token/list',
            headers: {
                authorization: token
            },
            contentType:'application/json',
            dataType: 'json',
            success: function (data) {
                if (data.status == 0) {
                    var ht = '<table style="width: 100%; text-align: center; padding-top: 20px; line-height: 26px">'
                    ht += '<tr><th style="width: 25%; font-size: 15px; font-weight: 400; color: #B1B5B9; padding-top: 15px">Date</th>';
                    ht += '<th style="width: 25%; font-size: 15px; font-weight: 400; color: #B1B5B9; padding-top: 15px">Lucky Code</th>';
                    ht += '<th style="width: 25%; font-size: 15px; font-weight: 400; color: #B1B5B9; padding-top: 15px">Type</th>';
                    ht += '<th style="width: 25%; font-size: 15px; font-weight: 400; color: #B1B5B9; padding-top: 15px">Status</th></tr>';
                    data.data.forEach(function (item,index) {
                        item.tokenInfoList.forEach(function (data, row) {
                            ht += '<tr>';
                            var time = data.createdTime;
                            ht += '<td style="font-size: 14px">'+time+'</td>';
                            let code = data.tokenCode;
                            ht += '<td style="font-size: 14px">'+code+'</td>';
                            var type = '';
                            if (data.type == 1) {
                                type = 'Purchase';
                            } else {
                                type = 'Referral';
                            }
                            ht += '<td style="font-size: 14px">'+type+'</td>';
                            var status = '';
                            if (data.status == 0) {
                                status = 'Pending';
                                ht += '<td style="font-size: 14px; color: cornflowerblue">'+status+'</td>';
                            } else if (data.status == 1) {
                                status = 'Waiting';
                                ht += '<td style="font-size: 14px">'+status+'</td>';
                            } else if (data.status == 2) {
                                status = 'Win';
                                ht += '<td style="font-size: 14px; color: gold">'+status+'</td>';
                            } else {
                                status = 'Loss';
                                ht += '<td style="font-size: 14px; color: red;">'+status+'</td>';
                            }
                            ht += '</tr>';
                        });
                    });
                    ht += '</table>';
                    ht += '<p style="color: #9B9B9B;font-size: small; margin-top: 10px">Once your referred friend or you paid and joined the game, the status of "Pending" will change to "Waiting". Lucky code with "Pending" status would not count. More friends you're referred, more free lucky tokens you will get.</p>';
                    $('#History').html(ht);
                } else {
                }
            }
        });
    }

    getResult();
    function getResult() {
        $.ajax({
            method: 'post',
            url: baseUrl + '/treasury/result/list',
            headers: {
                authorization: token
            },
            contentType:'application/json',
            dataType: 'json',
            success: function (data) {
                if (data.status == 0) {
                    var ht = '<table style="width: 100%; text-align: center; padding-top: 20px; line-height: 26px">'
                    ht += '<tr><th style="width: 33%; font-size: 15px; font-weight: 400; color: #B1B5B9; padding-top: 15px">Item</th>';
                    ht += '<th style="width: 33%; font-size: 15px; font-weight: 400; color: #B1B5B9; padding-top: 15px">Winner Lucky Code</th>';
                    data.data.forEach(function (item,index) {
                        item.infoList.forEach(function (data, row) {
                            // ht += '<tr>';
                            // var time = data.createdTime;
                            // ht += '<td style="font-size: 14px">'+time+'</td>';
                            // let code = data.tokenCode;
                            // ht += '<td style="font-size: 14px">'+code+'</td>';
                            // var type = '';
                            // if (data.type == 1) {
                            //     type = 'Purchase';
                            // } else {
                            //     type = 'Referral';
                            // }
                            // ht += '<td style="font-size: 14px">'+type+'</td>';
                            // var status = '';
                            // if (data.status == 0) {
                            //     status = 'Pending';
                            //     ht += '<td style="font-size: 14px; color: cornflowerblue">'+status+'</td>';
                            // } else if (data.status == 1) {
                            //     status = 'Waiting';
                            //     ht += '<td style="font-size: 14px">'+status+'</td>';
                            // } else if (data.status == 2) {
                            //     status = 'Win';
                            //     ht += '<td style="font-size: 14px; color: gold">'+status+'</td>';
                            // } else {
                            //     status = 'Loss';
                            //     ht += '<td style="font-size: 14px; color: red;">'+status+'</td>';
                            // }
                            // ht += '</tr>';
                        });
                    });
                    ht += '</table>';
                    $('#Result').html(ht);
                } else {
                }
            }
        });
    }

    function haveCash() {
        var buttonTap = true;
        $('#ModalCash').modal('hide');
        $('#ModalCash').on('hidden.bs.modal', function () {
            if (!buttonTap) {
                return;
            }
            buttonTap = false;
            $('#zzdr').modal('show');
            var isError = false;
            var errorMsg = '';
            var codeList;
            $.ajax({
                method: 'post',
                url: baseUrl + '/treasury/order/token/list',
                headers: {
                    authorization: token
                },
                data: JSON.stringify({
                    orderCode: orderCode,
                }),
                contentType:'application/json',
                dataType: 'json',
                success: function (data) {
                    if (data.status == 0) {
                        codeList = data.data;
                    } else {
                        isError = true;
                        errorMsg = data.msg;
                    }
                },
                error: function () {
                    isError = true;
                    errorMsg = 'Net Error!';
                }
            });
            $('#zzdr').on('shown.bs.modal',function () {
                var timeout = setTimeout(function () {
                    $('#zzdr').modal('hide');
                },1200);
            });
            $('#zzdr').on('hidden.bs.modal', function () {
                if (isError) {
                    $('#alert').html('<p>' + errorMsg + '</p>');
                    $('#ModalAlert').modal('show');
                } else {
                    var ht = '';
                    codeList.forEach(function (data, row) {
                        ht += '<tr><td>'+data.tokenCode+'</td></tr>';
                    });
                    $('#resultTable').html(ht);
                    $('#ModalCashResult').modal('show');
                }
            });
            $('#ModalCashResult').on('hidden.bs.modal', function () {
                getHistory();
            });
        });
    }

    function ShowNotice() {
        $('#ModalNotice').modal('show');
    }

    function selectGlobe() {
        buyAmount('globe');
    }

    function selectSmart() {
        buyAmount('smart');
    }

    var amountNum = 10;
    $('#amountNum').text(amountNum);
    function amountReduce() {
        amountNum = Math.max(10, amountNum-10);
        $('#amountNum').text(amountNum);
        $('#totalExpense').text(amountNum);
    }

    function amountAdd() {
        amountNum = Math.min(100, amountNum + 10);
        $('#amountNum').text(amountNum);
        $('#totalExpense').text(amountNum);
    }
    $('#totalExpense').text(amountNum);

</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-138276305-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-138276305-1', {
         'page_title' : 'MixFun',
         'page_path': '/draw'
    });
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-8296699377234768",
    enable_page_level_ads: true
  });
</script>
</html>
