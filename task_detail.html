<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Task Details</title>
    <link rel="icon" href="img/logo.png" type="image/x-icon">
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta property="og:url" content="" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="" />
    <meta property="og:description" content="" />
    <meta property="og:image" content="images/share-logo.png" />
    <link rel="icon" href="img/logo.png" type="image/x-icon">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="css/bootstrap-grid.css"/>
    <link rel="stylesheet" type="text/css" href="css/bootstrap-reboot.css"/>
</head>
<script src="https://code.jquery.com/jquery-3.4.0.js"></script>
<script type="text/javascript" src="js/platform.js"></script>
<script src="js/bootstrap.js"></script>
<script src="js/bootstrap.bundle.js"></script>
<script src="js/clipboard.min.js"></script>

<body>
<div style="width: 100%; height: 30%; background-color: #e0a800">
    <img id="taskImage">
    <p id="taskName"></p>
</div>
<div>
    <p style="color: black; margin-top: 3%; padding: 0; margin-left: 5%">Description</p>
    <ul>
        <li>New users only</li>
        <li>Register or complete tutorial, if asked so</li>
        <li>Donâ€™t change between network</li>
    </ul>
    <div align="center">
        <button class="btn" style="width: 60%; height: 44px; margin-top: 20px; background-color: #e0a800; color: white;font: 18px PingFangSC-Regular, sans-serif;" onclick="downloadAction()">Start Task</button>
    </div>
</div>

<!-- alert -->
<div class="modal fade" id="tot" tabindex="-1" role="dialog" aria-labelledby="Box" aria-hidden="true" style="margin-top: 20%; z-index: 9999">
    <div class="modal-dialog" role="document" style="border-radius: 20px;height: 100%">
        <div class="modal-content" style="border-radius: 20px;">
            <div class="modal-body">
                <h5 class="modal-title" id="copy_label"></h5>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="ModalAlert" tabindex="-1" role="dialog" aria-labelledby="ModalNoticeTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered" role="document" style="border-radius: 20px;">
        <div class="modal-content" style="border-radius: 20px;">
            <div class="modal-header" style="background: linear-gradient(to right, #b4d0ef, #e4f1f8);border-radius: 20px 20px 0 0;">
                <h5 class="modal-title" id="ModalNoticeTitle">Message</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="alert"></div>
        </div>
    </div>
</div>
</body>

<style>
    .btn:focus,
    .btn:active:focus,
    .btn.active:focus,
    .btn.focus,
    .btn:active.focus,
    .btn.active.focus {
        box-shadow:none;
    }

    html,body{
        height:100%;
        width:100%;
        background-color: white;
    }

    div img {
        float: left;
        margin: 15% 0 15% 20px;
        border-radius: 6px 6px 6px 6px;
        width: 25%;
        vertical-align: middle;
    }

    div p {
        vertical-align: middle;
        padding-top: 22%;
        margin-left: 35%;
        padding-bottom: 22%;
        font: bold 18px PingFangSC-Regular, sans-serif;
        color: white;
    }

</style>

<script type="text/javascript">

    $('.modal').on("hidden.bs.modal", function () {
        if($('.modal:visible').length)
        {
            $('.modal-backdrop').first().css('z-index', parseInt($('.modal:visible').last().css('z-index')) - 10);
            $('body').addClass('modal-open');
        }
    }).on("show.bs.modal", function (e) {
        if($('.modal:visible').length)
        {
            $('.modal-backdrop.in').first().css('z-index', parseInt($('.modal:visible').last().css('z-index')) + 10);
            $(this).css('z-index', parseInt($('.modal-backdrop.in').first().css('z-index')) + 10);
        }
    });

    var baseUrl = "https://api.mixit.fun/";
    function GetRequest() {
        var url = location.search;
        var theRequest = new Object();
        if (url.indexOf("?") != -1) {
            var str = url.substr(1);
            strs = str.split("&");
            for (var i = 0; i < strs.length; i++) {
                theRequest[strs[i].split("=")[0]] = unescape(strs[i].split("=")[1]);
            }
        }
        return theRequest;
    }
    let downloadURL = GetRequest().url;
    let taskCode = GetRequest().code;
    let taskName = GetRequest().name;

    createContext()
    function createContext() {
        document.getElementById('taskImage').src = 'img/'+taskCode+'_img.png';
        taskName = taskName.substr(1);
        taskName = taskName.substr(0, taskName.length-1);

        $('#taskName').html(taskName);
    }

    function downloadAction() {
        window.location.href = downloadURL;
    }

</script>
</html>